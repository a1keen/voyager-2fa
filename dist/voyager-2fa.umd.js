(function(e,l){typeof exports=="object"&&typeof module!="undefined"?l(require("vue"),require("axios")):typeof define=="function"&&define.amd?define(["vue","axios"],l):(e=typeof globalThis!="undefined"?globalThis:e||self,l(e.Vue,e.axios))})(this,function(e,l){"use strict";function m(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var d=m(l),c=(t,a)=>{for(const[o,i]of a)t[o]=i;return t};const _={props:{errors:Array,data:Object},computed:{otpRequested(){return this.errors.includes(this.__("2fa::2fa.enter_otp"))||this.errors.includes(this.__("2fa::2fa.otp_empty"))||this.errors.includes(this.__("2fa::2fa.otp_wrong"))}}},f={class:"w-full mt-1"},h={for:"email",class:"label"},p={class:"mt-1 rounded-md shadow-sm"},u=["value","autofocus"],y={class:"w-full mt-6"},b={for:"password",class:"label"},w={class:"mt-1 rounded-md shadow-sm"},g=["value"],V={key:0,class:"w-full mt-6"},E=e.createElementVNode("label",{for:"otp",class:"label"},"One time password",-1),N={class:"mt-1 rounded-md shadow-sm"},k=["value"],D={class:"w-full flex justify-between mt-4"},x={class:"select-none"},B=["checked"],C={for:"remember",class:"text-sm leading-8 mx-1"},M={class:"flex items-center justify-between mt-4"},S={class:"button large accent w-full justify-center",type:"submit"};function T(t,a,o,i,r,n){return e.openBlock(),e.createElementBlock("div",null,[e.createElementVNode("div",f,[e.createElementVNode("label",h,e.toDisplayString(t.__("voyager::auth.email")),1),e.createElementVNode("div",p,[e.createElementVNode("input",{type:"email",name:"email",id:"email",class:"input w-full mb-4 placeholder-gray-400",value:o.data.email,autofocus:!n.otpRequested},null,8,u)])]),e.createElementVNode("div",y,[e.createElementVNode("label",b,e.toDisplayString(t.__("voyager::auth.password")),1),e.createElementVNode("div",w,[e.createElementVNode("input",{type:"password",name:"password",id:"password",class:"input w-full mb-3 placeholder-gray-400",value:o.data.password},null,8,g)])]),n.otpRequested?(e.openBlock(),e.createElementBlock("div",V,[E,e.createElementVNode("div",N,[e.createElementVNode("input",{type:"text",name:"otp",id:"otp",class:"input w-full mb-3 placeholder-gray-400",value:o.data.otp,autofocus:""},null,8,k)])])):e.createCommentVNode("",!0),e.createElementVNode("div",D,[e.createElementVNode("div",x,[e.createElementVNode("input",{type:"checkbox",class:"input",name:"remember",id:"remember",checked:o.data.remember=="on"||!1},null,8,B),e.createElementVNode("label",C,e.toDisplayString(t.__("voyager::auth.remember_me")),1)])]),e.createElementVNode("div",M,[e.createElementVNode("button",S,e.toDisplayString(t.__("voyager::auth.login")),1)])])}var L=c(_,[["render",T]]);const q={props:{twofakey:String,qr:String,active:Boolean,allowDisable:Boolean},mounted(){console.log(this.allowDisable)},data(){return{code:null}},methods:{enable(){d.default.post(this.route("voyager.voyager-manage-2fa"),{enable:!0,key:this.twofakey,code:this.code}).then(t=>{t.status==200&&(new this.$notification(this.__("2fa::2fa.activated")).color("green").timeout().show(),location.reload())}).catch(()=>{})},disable(){this.allowDisable&&new this.$notification(this.__("2fa::2fa.disable_confirm")).color("yellow").timeout().confirm().show().then(t=>{t&&d.default.post(this.route("voyager.voyager-manage-2fa"),{enable:!1}).then(a=>{a.status==200&&(new this.$notification(this.__("2fa::2fa.disabled")).color("green").timeout().show(),location.reload())}).catch(()=>{})})}}},j=["innerHTML"],H={class:"flex w-full mt-2"},A={class:"flex-none text-center"},R=["innerHTML"],v=["innerHTML"],O={class:"flex-grow mx-2"},$=["placeholder"],F={class:"inline-flex space-x-2 mt-2"};function U(t,a,o,i,r,n){const G=e.resolveComponent("Alert"),I=e.resolveComponent("Card");return e.openBlock(),e.createBlock(I,{title:"Manage 2FA"},{default:e.withCtx(()=>[o.active?(e.openBlock(),e.createBlock(G,{key:0},{default:e.withCtx(()=>[e.createElementVNode("p",{innerHTML:t.nl2br(o.allowDisable?t.__("2fa::2fa.active_alert_disable"):t.__("2fa::2fa.active_alert"))},null,8,j)]),_:1})):e.createCommentVNode("",!0),e.createElementVNode("div",H,[e.createElementVNode("div",A,[e.createElementVNode("div",{innerHTML:o.qr},null,8,R),e.createElementVNode("div",{innerHTML:o.twofakey},null,8,v)]),e.createElementVNode("div",O,[e.createElementVNode("p",null,e.toDisplayString(t.__("2fa::2fa.scan_info")),1),e.withDirectives(e.createElementVNode("input",{type:"text",class:"input","onUpdate:modelValue":a[0]||(a[0]=s=>r.code=s),placeholder:t.__("2fa::2fa.new_otp")},null,8,$),[[e.vModelText,r.code]]),e.createElementVNode("div",F,[e.createElementVNode("button",{class:"button blue",onClick:a[1]||(a[1]=e.withModifiers((...s)=>n.enable&&n.enable(...s),["prevent"]))},e.toDisplayString(o.active?t.__("2fa::2fa.renew"):t.__("voyager::generic.enable")),1),o.active&&o.allowDisable?(e.openBlock(),e.createElementBlock("button",{key:0,class:"button",onClick:a[2]||(a[2]=e.withModifiers((...s)=>n.disable&&n.disable(...s),["prevent"]))},e.toDisplayString(t.__("voyager::generic.disable")),1)):e.createCommentVNode("",!0)])])])]),_:1})}var z=c(q,[["render",U]]);voyager.component("voyager-2fa-login",L),voyager.component("voyager-2fa-manage",z)});
